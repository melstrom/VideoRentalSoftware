/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * MembershipPanel.java
 *
 * Created on 15-Apr-2011, 1:05:28 PM
 */
package ui;
import account.Employee;
import account.Customer;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Vector;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableModel;
import search.Search;





 /*
 * @author cwang01
 */
public class MembershipPanel extends javax.swing.JPanel {
private Vector <Vector <String>> tableContent;
private Vector <String> header;
DefaultTableModel table;

/**
    /** Creates new form MembershipPanel */
    public MembershipPanel() {
        MakeTable();
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    


    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private Vector ReturnVector(ArrayList list){
        return new Vector(list);
    }

    private void MakeTable(){
       
      tableContent = new Vector<Vector <String>>();
      for(int i = 0; i < 1; i++){
          Vector temp = new Vector <String>();
          temp.add(" ");
          temp.add(" ");
          temp.add(" ");
          temp.add(" ");
          temp.add(" ");
          tableContent.add(temp);
      }

      header = new Vector<String>();
      header.add("Customer ID"); //Empid
      header.add("Name"); // employee name
      header.add("Phone Number"); // employee position
      header.add("Address"); // employee department
    }

    private void UpdateTable() {
      notFoundLabel.setVisible(false);
      String searchItem = (String)inCIdField1.getText();
      String selectedItem = (String)jComboBox3.getSelectedItem();
      tableContent = new Vector<Vector <String>>();
        table = (DefaultTableModel)jTable4.getModel();
        while (table.getRowCount()>0)
            table.removeRow(0);

        try {
            ArrayList<account.Customer> result = Search.searchCustomers(searchItem, selectedItem);
            if(result != null){
                for (int i = 0; i < result.size();i++) //inventory.GeneralMovie movie : result)
                {
                    account.Customer singleCustomer = (account.Customer)result.get(i);

                    Vector <String> row = new Vector<String>();
                    row.add("" + singleCustomer.getAccountID());
                    row.add("" + singleCustomer.getFname() + " " + singleCustomer.getLname());
                    row.add("" + singleCustomer.getPhoneNum());
                    row.add("" + singleCustomer.getAddress());
                    table.addRow(row);
                }
            }
            else{
                notFoundLabel.setVisible(true);
            }


        } catch (SQLException ex) {
            Logger.getLogger(CustomerFrame.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(CustomerFrame.class.getName()).log(Level.SEVERE, null, ex);
        } catch (NumberFormatException ex){
            inCIdField1.setText("Enter Value here:");
            notFoundLabel.setVisible(true);
        } catch (NullPointerException ex){
            notFoundLabel.setVisible(true);
        } catch (Exception ex)
            {System.out.print(ex.getMessage());ex.printStackTrace();
        }
        table.fireTableStructureChanged();

    }
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane5 = new javax.swing.JScrollPane();
        jTable4 = new javax.swing.JTable();
        addButton = new javax.swing.JButton();
        inCIdField1 = new javax.swing.JTextField();
        inCIdLabel1 = new javax.swing.JLabel();
        inCOkButton1 = new javax.swing.JButton();
        jComboBox3 = new javax.swing.JComboBox();
        modifyButton = new javax.swing.JButton();
        notFoundLabel = new javax.swing.JLabel();

        setOpaque(false);

        jTable4.setModel(new javax.swing.table.DefaultTableModel(
            tableContent,header
        ));
        jScrollPane5.setViewportView(jTable4);

        addButton.setText("Add");
        addButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addButtonActionPerformed(evt);
            }
        });

        inCIdField1.setText("Enter Value Here:");
        inCIdField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                inCIdField1ActionPerformed(evt);
            }
        });

        inCIdLabel1.setFont(new java.awt.Font("Tahoma", 1, 11));
        inCIdLabel1.setText("Customer:");

        inCOkButton1.setText("OK");
        inCOkButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                inCOkButton1ActionPerformed(evt);
            }
        });

        jComboBox3.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "ID", "Last Name", "Phone Number" }));

        modifyButton.setText("Modify");
        modifyButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                modifyButtonActionPerformed(evt);
            }
        });

        notFoundLabel.setVisible(false);
        notFoundLabel.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        notFoundLabel.setForeground(new java.awt.Color(255, 0, 0));
        notFoundLabel.setText("Customer Not Found");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(10, 10, 10)
                        .addComponent(inCIdLabel1)
                        .addGap(26, 26, 26)
                        .addComponent(inCIdField1, javax.swing.GroupLayout.PREFERRED_SIZE, 187, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(6, 6, 6)
                        .addComponent(jComboBox3, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(6, 6, 6)
                        .addComponent(inCOkButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 71, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(41, 41, 41)
                        .addComponent(notFoundLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 163, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(10, 10, 10)
                        .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 684, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(476, 476, 476)
                        .addComponent(modifyButton, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(addButton, javax.swing.GroupLayout.PREFERRED_SIZE, 107, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(11, 11, 11)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(3, 3, 3)
                        .addComponent(inCIdLabel1))
                    .addComponent(inCIdField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jComboBox3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(inCOkButton1)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(1, 1, 1)
                        .addComponent(notFoundLabel)))
                .addGap(6, 6, 6)
                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 345, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(6, 6, 6)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(addButton)
                    .addComponent(modifyButton)))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void inCOkButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_inCOkButton1ActionPerformed
        // TODO add your handling code here:
        UpdateTable();
    }//GEN-LAST:event_inCOkButton1ActionPerformed

    private void addButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addButtonActionPerformed
        // TODO add your handling code here:
        new CustomerInfoDialog(1,false).setVisible(true);
    }//GEN-LAST:event_addButtonActionPerformed

    private void modifyButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_modifyButtonActionPerformed
        // TODO add your handling code here:
        int rowNumber = jTable4.getSelectedRow();
        String valueID = "" + table.getValueAt(rowNumber, 0);
        new CustomerInfoDialog(valueID,0,false).setVisible(true);
        UpdateTable();
    }//GEN-LAST:event_modifyButtonActionPerformed

    private void inCIdField1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_inCIdField1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_inCIdField1ActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton addButton;
    private javax.swing.JTextField inCIdField1;
    private javax.swing.JLabel inCIdLabel1;
    private javax.swing.JButton inCOkButton1;
    private javax.swing.JComboBox jComboBox3;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JTable jTable4;
    private javax.swing.JButton modifyButton;
    private javax.swing.JLabel notFoundLabel;
    // End of variables declaration//GEN-END:variables

}
